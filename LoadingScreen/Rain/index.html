<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Regen & Gewitter</title>
  <style>
    @property --angle {
      syntax: "<angle>";
      inherits: false;
      initial-value: 91deg;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(180deg, #07131c, #305472);
      position: relative;
    }

    .lightning-flash {
      animation: lightning 0.2s linear;
    }

    @keyframes lightning {
      0% {
        background: radial-gradient(circle at center, #ffffff55, #fff0 40%), linear-gradient(180deg, #fff9, #305472);
      }
      50% {
        background: radial-gradient(circle at center, #ffffffaa, #fff0 50%), linear-gradient(180deg, #fff, #305472);
      }
      100% {
        background: linear-gradient(180deg, #07131c, #305472);
      }
    }

    .rain {
      position: absolute;
      width: 120vw;
      height: 100vh;
      left: -10vw;
      top: 0;
      z-index: 0;
    }

    .drop {
      position: absolute;
      top: -5vmin;
      border: 0.25vmin solid transparent;
      border-bottom-color: #abc2e9;
      transform: rotate(var(--angle, 91deg));
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="rain"></div>

  <script>
    const rain = document.querySelector('.rain');
    const dropCount = 900;

    for (let i = 0; i < dropCount; i++) {
      const drop = document.createElement('div');
      drop.className = 'drop';
      drop.style.opacity = (Math.random() * 0.8 + 0.2).toFixed(2);
      drop.style.left = (Math.random() * 120).toFixed(2) + 'vw';
      drop.style.borderLeftWidth = (Math.random() * 6).toFixed(2) + 'vmin';
      drop.style.setProperty('--angle', '91deg');

      const fallDuration = (Math.random() * 1.5 + 0.8).toFixed(2); // schneller
      const delay = (Math.random() * -10).toFixed(2);
      const animationName = `fall-${i}`;
      const startPct = Math.random() * 0.2;

      const style = document.createElement('style');
      style.innerHTML = `
        @keyframes ${animationName} {
          ${Math.round(startPct * 100)}% {
            transform: rotate(var(--angle)) translatex(0);
          }
          100% {
            transform: rotate(var(--angle)) translatex(110vh);
          }
        }
      `;
      document.head.appendChild(style);

      drop.style.animation = `${animationName} ${fallDuration}s ${delay}s linear infinite`;
      rain.appendChild(drop);
    }

    // Blitzfunktion (häufiger & zufällig)
    function triggerLightning() {
      document.body.classList.add('lightning-flash');
      setTimeout(() => {
        document.body.classList.remove('lightning-flash');
      }, 200);
    }

    function randomLightningLoop() {
      const interval = Math.random() * 15000 + 1000; // 1–3 Sekunden
      setTimeout(() => {
        triggerLightning();
        randomLightningLoop();
      }, interval);
    }

    randomLightningLoop();
  </script>
</body>
</html>
